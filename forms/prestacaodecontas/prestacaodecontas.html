<html>
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="iE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" type="text/css" href="http://10.10.1.15:8080/webdesk/customresources?resourceName=bootstrap/css/bootstrap.css">
<script src="http://10.10.1.15:8080/webdesk/customresources?resourceName=bootstrap/js/bootstrap.js"></script>
<script src="http://10.10.1.15:8080/webdesk/customresources?resourceName=bootstrap/js/jquery.mask.min.js"></script>
<script src="http://10.10.1.15:8080/webdesk/customresources?resourceName=bootstrap/js/utils.js"></script>
<script src="http://10.10.1.15:8080/webdesk/customresources?resourceName=bootstrap/js/validacoes.js"></script>
</head>
<body>
	<form name="form" id="validation-form" method="POST" class="form-horizontal form-bordered form-row-stripped">
		<table style="width: 99% align:center cellpadding:0 cellspacing:0 border:0">
			<tbody>
				<tr>
					<td style="width: 10%" rowspan="3"><img src="http://10.10.1.15:8080/webdesk/customresources?resourceName=logo_casp/logocasp.gif" style="width: 204" height="79"></td>
					<td rowspan="3">
						<div align="center">
							<b>FORMUL&Aacute;RIO DE PRESTA&Ccedil;&Atilde;O DE CONTAS</b>
						</div>
					</td>
				</tr>
				<tr>
					<td style="width: 7%" align="right"><label for="chamado_num" class="control-label">N&uacute;mero:&nbsp;&nbsp;&nbsp;&nbsp;</label></td>
					<td style="width: 10%"><input type="text" name="chamado_num" id="chamado_num" placeholder="N&uacute;mero chamado" class="form-control" readonly="readonly" /></td>
				</tr>
				<tr>
					<td style="width: 7%" align=right><label for="data_sol" class="control-label">Data:&nbsp;&nbsp;&nbsp;&nbsp;</label></td>
					<td style="width: 10%"><input type="date" name="data_sol" id="data_sol" class="form-control" size="15" readonly="readonly" /></td>
				</tr>
			</tbody>
		</table>
		<div class="box-content">
			<div class="box-content">
				<div class="box box-black">
					<div class="box-title col-xs-36">
						<h3>
							<i class="fa  fa-users glyphicon glyphicon-unchecked"></i>Solicita&ccedil;&atilde;o de Dinheiro
						</h3>
						<div class="box-tool">
							<a data-action="collapse" href="#"> Minimizar <i><i class="glyphicon glyphicon-align-right"></i></i></a>
							<div class="col-xs-1"></div>
						</div>
					</div>
					<div class="box-content">
						<div class="col-xs-36" id="div_inicio" name="div_inicio">
							<div class="form-group">
								<label for="matricula_user" class="col-sm-4 col-xs-4 control-label">Solicitante:</label>
								<div class="col-sm-5 col-xs-5 controls">
									<input type="text" class="form-control" placeholder="Matr&iacute;cula" name="matricula_user" id="matricula_user" readonly="readonly" />
								</div>
								<div class="col-sm-13 col-xs-13 controls">
									<input type="text" class="form-control" placeholder="Solicitante" name="solicitante" id="solicitante" readonly="readonly" />
								</div>
								<label for="ramal" class="col-sm-4 col-xs-4 control-label">Ramal:</label>
								<div class="col-sm-5 col-xs-5 controls">
									<input type="text" class="form-control  ramal" placeholder="Ramal" name="ramal" id="ramal" />
								</div>
							</div>
							<div class="form-group">
								<label for="user_pend" class="col-sm-4 col-xs-4 control-label">Pend&ecirc;ncias:</label>
								<div class="col-sm-32 col-xs-32 controls">
									<textarea name="user_pend" id="user_pend" rows="3" cols="70" class="form-control" border="1" style="border: 2px solid red; background: #CCA383; resize: none" readonly></textarea>
								</div>
							</div>
							<div class="form-group">
								<label for="cpf" class="col-sm-4 col-xs-4 control-label">CPF:</label>
								<div class="col-sm-5 col-xs-5 controls">
									<input type="text" name="cpf" id="cpf" class="form-control cpf" maxlength="14" />
								</div>
								<label for="banco" class="col-sm-4 col-xs-4 control-label">Banco:</label>
								<div class="col-sm-7 col-xs-7 controls">
									<div class="input-group ">
										<input type="text" name="banco" id="banco" title="Digite o Número do Banco" id="banco" class="form-control" readonly="readonly" />
										<span class="input-group-btn">
											<button class="btn btn-default btn-xs " type="button" style="cursor: zoom-in" onclick='zoomBanco();'>
												<spam class="glyphicon glyphicon-zoom-in glyphicon-"></spam>
											</button>
										</span>
									</div>
								</div>
								<label for="agencia" class="col-sm-4 col-xs-4 control-label">Ag&ecirc;ncia:</label>
								<div class="col-sm-3 col-xs-3 controls">
									<input type="text" name="agencia" id="agencia" size="20" title="Digite o Número do Banco" class="form-control agencia" />
								</div>
								<label for="conta" class="col-sm-4 col-xs-4 control-label">Conta:</label>
								<div class="col-sm-5 col-xs-5 controls">
									<input type="text" name="conta" id="conta" size="20" title="Digite o Número do Banco" class="form-control conta" />
								</div>
							</div>
							<div class="form-group">
								<label for="valor" class="col-sm-4 col-xs-4 control-label">Valor:</label>
								<div class="col-sm-5 col-xs-5 controls">
									<input type="text" id="valor" name="valor" size="10" title="Digite o valor" class="form-control money" />
								</div>
								<label for="obs1" class="col-sm-4 col-xs-4 control-label">Motivo:</label>
								<div class="col-sm-23 col-xs-23 controls">
									<textarea name="obs1" id="obs1" rows="3" cols="70" class="form-control animated"></textarea>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			
			<div class="box-content" >
				<div class="box box-black">
					<div class="box-title col-xs-36">
						<h3>
							<i class="fa  fa-users glyphicon glyphicon-unchecked"></i>Aprova&ccedil;&atilde;o do gestor:
						</h3>
						<div class="box-tool">
							<a data-action="collapse" href="#"> Minimizar <i><i class="glyphicon glyphicon-align-right"></i></i></a>
						</div>
					</div>
					<div class="box-content">
						<div class="col-xs-36 " id="div_aprova" name="div_aprova">
							<div class="form-group">
								<label for="labelmat" class="col-sm-4 col-xs-4 control-label">Aprovado?</label>
								<div class="col-sm-4 col-xs-4 controls">
									<label class="control-label"><input type="radio" name="rd_aprova" id="rd_aprova" style="cursor: pointer" value="1" /> Sim</label> <label class="control-label"><input type="radio" name="rd_aprova" id="rd_aprova" style="cursor: pointer" value="2" /> N&atilde;o</label>
								</div>
							</div>
							<div class="form-group">
								<label for="labelmat" class="col-sm-4 col-xs-4 control-label">Observa&ccedil;&otilde;es:</label>
								<div class="col-sm-32 col-xs-32 controls">
									<textarea name="obs_entrega" id="obs_entrega" rows="3" cols="70" class="form-control animated"></textarea>
								</div>
							</div>
							<div class="form-group">
								<label for="matricula_user" class="col-sm-4 col-xs-4 control-label">Executor:</label>
								<div class="col-sm-5 col-xs-5 controls">
									<input type="text" class="form-control" placeholder="Matr&iacute;cula" name="matricula_aprova" id="matricula_aprova" readonly="readonly" />
								</div>
								<div class="col-sm-13 col-xs-13 controls">
									<input type="text" class="form-control" placeholder="Solicitante" name="nome_aprova" id="nome_aprova" readonly="readonly" />
								</div>
								<label for="ramal" class="col-sm-4 col-xs-4 control-label">Data:</label>
								<div class="col-sm-5 col-xs-5 controls">
									<input type="date" class="form-control" name="data_aprova" id="data_aprova" readonly="readonly" />
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>			
			<div class="box-content">
				<div class="box box-black">
					<div class="box-title col-xs-36">
						<h3>
							<i class="fa  fa-users glyphicon glyphicon-unchecked"></i>Financeiro - Entrega o dinheiro
						</h3>
						<div class="box-tool">
							<a data-action="collapse" href="#"> Minimizar <i><i class="glyphicon glyphicon-align-right"></i></i></a>
						</div>
					</div>
					<div class="box-content">
						<div class="col-xs-36 " id="div_entrega" name="div_entrega">
							<div class="form-group">
								<label for="labelmat" class="col-sm-4 col-xs-4 control-label">Entregue?</label>
								<div class="col-sm-4 col-xs-4 controls">
									<label class="control-label"><input type="radio" name="rd_entregue" id="rd_entregue" style="cursor: pointer" value="1" /> Sim</label> <label class="control-label"><input type="radio" name="rd_entregue" id="rd_entregue" style="cursor: pointer" value="2" /> N&atilde;o</label>
								</div>
							</div>
							<div class="form-group">
								<label for="labelmat" class="col-sm-4 col-xs-4 control-label">Observa&ccedil;&otilde;es:</label>
								<div class="col-sm-32 col-xs-32 controls">
									<textarea name="obs_entrega" id="obs_entrega" rows="3" cols="70" class="form-control animated"></textarea>
								</div>
							</div>
							<div class="form-group">
								<label for="matricula_user" class="col-sm-4 col-xs-4 control-label">Executor:</label>
								<div class="col-sm-5 col-xs-5 controls">
									<input type="text" class="form-control" placeholder="Matr&iacute;cula" name="matricula_entrega" id="matricula_entrega" readonly="readonly" />
								</div>
								<div class="col-sm-13 col-xs-13 controls">
									<input type="text" class="form-control" placeholder="Solicitante" name="nome_entrega" id="nome_entrega" readonly="readonly" />
								</div>
								<label for="ramal" class="col-sm-4 col-xs-4 control-label">Data:</label>
								<div class="col-sm-5 col-xs-5 controls">
									<input type="date" class="form-control" name="data_entrega" id="data_entrega" readonly="readonly" />
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			
			<div class="box-content" >
				<div class="box box-black">
					<div class="box-title col-xs-36">
						<h3>
							<i class="fa  fa-users glyphicon glyphicon-unchecked"></i>Presta&ccedil;&atilde;o de Contas
						</h3>
						<div class="box-tool">
							<a data-action="collapse" href="#"> Minimizar <i><i class="glyphicon glyphicon-align-right"></i></i></a>
						</div>
					</div>
					<div class="box-content">
						<div class="col-xs-36 " id="div_prest_conta" name="div_prest_conta">
							<div class="form-group">
								<label for="valor" class="col-sm-4 col-xs-4 control-label">Notas Fiscais:</label>
								<div class="col-sm-32 col-xs-32 controls">
									<table tablename="tb_prest_conta" id="tb_prest_conta" noaddbutton=true class="table">
										<thead>
											<tr>
												<td><label class="control-label">Nota Fiscal:</label></td>
												<td><label class="control-label">Descri&ccedil;&atilde;o:</label></td>
												<td><label class="control-label">Data:</label></td>
												<td><label class="control-label">Valor:</label></td>
											</tr>
										</thead>
										<tr>
											<td style="width: 20%"><input type="text" name="nota_fiscal" id="nota_fiscal" class="form-control conta" placeholder="Nota Fiscal" /></td>
											<td><input type="text" name="desc_nota_fiscal" id="desc_nota_fiscal" class="form-control" placeholder="Descri&ccedil;&atilde;o" /></td>
											<td style="width: 20%"><input type="date" name="data_nota_fiscal" id="data_nota_fiscal" class="form-control" placeholder="Nota Fiscal" /></td>
											<td style="width: 20%"><input type="text" name="valor_nota_fiscal" id="valor_nota_fiscal" class="form-control money vl_nota" placeholder="Valor da Nota Fiscal" /></td>
										</tr>
									</table>
								</div>
								<label for="valor" class="col-sm-4 col-xs-4 control-label"></label>
								<div class="col-sm-32 col-xs-32 controls">
									<table border="0" class="table">
										<tr>
											<td style="width: 12%"><input type="button" class="form-control" id="bt_add_nota" name="bt_add_nota" onclick="wdkAddChild('tb_prest_conta')" value="Adicionar Nota Fiscal"></td>
											<td align="right"><label class="control-label">Somat&oacute;rio:</label></td>
											<td style="width: 19%"><input type="text" name="somatorio_nota_fiscal" id="somatorio_nota_fiscal" class="form-control money" placeholder="Somatório das Notas Fiscais" readonly="readonly" /></td>
											<td style="width: 12%"><input type="button" class="form-control" id="somatorio_nota" name="somatorio_nota" onclick="" value="Somar Notas Fiscais"></td>
										</tr>
									</table>
								</div>
							</div>
						</div>
						<div class="form-group">
							<label for="labelmat" class="col-sm-16 col-xs-16 control-label">Total Geral:</label>
							<div class="col-sm-6 col-xs-6 controls">
								<input type="text" name="soma_total" id="soma_total" class="form-control" readonly="readonly">
							</div>
							<label for="labelmat" class="col-sm-4 col-xs-4 control-label">Receber (+)<br>Devolver (-)
							</label>
							<div class="col-sm-6 col-xs-6 controls">
								<input type="text" name="calc_desp" id="calc_desp" class="form-control" readonly="readonly">
							</div>
							<div class="col-sm-4 col-xs-4 controls">
								<button type="button" name="somar_total" id="somar_total" class="form-control">Calcular</button>
							</div>
						</div>
						<div class="form-group">
							<label for="matricula_user" class="col-sm-4 col-xs-4 control-label">Executor:</label>
							<div class="col-sm-5 col-xs-5 controls">
								<input type="text" class="form-control" placeholder="Matr&iacute;cula" name="matricula_prest" id="matricula_prest" readonly="readonly" />
							</div>
							<div class="col-sm-13 col-xs-13 controls">
								<input type="text" class="form-control" placeholder="Solicitante" name="nome_prest" id="nome_prest" readonly="readonly" />
							</div>
							<label for="ramal" class="col-sm-4 col-xs-4 control-label">Data:</label>
							<div class="col-sm-5 col-xs-5 controls">
								<input type="date" class="form-control" name="date_prest" id="date_prest" readonly="readonly" />
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="box-content">
				<div class="box box-black">
					<div class="box-title col-xs-36">
						<h3>
							<i class="fa  fa-users glyphicon glyphicon-unchecked"></i>Financeiro - Confer&ecirc;ncia dos Lan&ccedil;amentos
						</h3>
						<div class="box-tool">
							<a data-action="collapse" href="#"> Minimizar <i><i class="glyphicon glyphicon-align-right"></i></i></a>
						</div>
					</div>
					<div class="box-content">
						<div class="col-xs-36 " id="div_conferecia2" name="div_conferecia2">
							<div class="form-group">
								<label for="labelmat" class="col-sm-4 col-xs-4 control-label">Documentos ok?</label>
								<div class="col-sm-4 col-xs-4 controls">
									<label class="control-label"><input type="radio" name="rd_aprovacao4" id="rd_aprovacao4" style="cursor: pointer" value="1" /> Sim</label> <label class="control-label"><input type="radio" name="rd_aprovacao4" id="rd_aprovacao4" style="cursor: pointer" value="2" /> N&atilde;o</label>
								</div>
							</div>
							<div class="form-group">
								<label for="labelmat" class="col-sm-4 col-xs-4 control-label">Observa&ccedil;&otilde;es:</label>
								<div class="col-sm-32 col-xs-32 controls">
									<textarea name="obs8" id="obs8" rows="3" cols="70" class="form-control animated"></textarea>
								</div>
							</div>
							<div class="form-group">
								<label for="matricula_user" class="col-sm-4 col-xs-4 control-label">Executor:</label>
								<div class="col-sm-5 col-xs-5 controls">
									<input type="text" class="form-control" placeholder="Matr&iacute;cula" name="matricula_conf" id="matricula_conf" readonly="readonly" />
								</div>
								<div class="col-sm-13 col-xs-13 controls">
									<input type="text" class="form-control" placeholder="Solicitante" name="nome_conf" id="nome_conf" readonly="readonly" />
								</div>
								<label for="ramal" class="col-sm-4 col-xs-4 control-label">Data:</label>
								<div class="col-sm-5 col-xs-5 controls">
									<input type="date" class="form-control" name="date_conf" id="date_conf" readonly="readonly" />
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</form>
</body>
<script type="text/javascript">

	$(function() {

		$('.ramal').mask('0000');

		$('.agencia').mask('00000');

		$('#conta').mask('000.000.000-0', {
			reverse : true
		});

		$('.money').mask('0.000.000,00', {
			reverse : true
		});

		$('.cpf').mask('000.000.000-00', {
			reverse : true
		}).blur(function(e) {
			var cpf = $(this).val();
			if (!validarCPF(cpf)) {
				alert("CPF inválido");
				$(this).focus().select();
			}
		});

		var getValor = function(valor) {
			var aux = parseFloat(valor.replace(/\./g, '').replace(/\,/g, '.'));
			if (!isNaN(aux)) {
				return aux;
			} else
				return 0;
		}

		var setValor = function(valor) {
			return valor.toFixed(2).replace(".", ",").replace(
					/(\d)(?=(\d{3})+(?!\d))/g, "$1.");
		}

		var somarNotas = function() {
			var acumulado = 0;
			var aux = 0;
			$(".vl_nota").each(function() {
				acumulado += getValor($(this).val());
			});
			$('#somatorio_nota_fiscal').val(setValor(acumulado));
			return acumulado;
		}

		$("#somatorio_nota,#somar_total").click(function() {
			var acumulado = 0;
			//somatorio das notas fiscais
			acumulado = +somarNotas();
			//somatorio dos tipos de despesa
			$('#soma_total').val(setValor(acumulado));
			//calculo do acerto finaceiro
			var aux = getValor($('#valor').val());
			aux = aux - acumulado;
			$('#calc_desp').val(setValor(aux));
		});

	});

	function zoomBanco() {
		zoomECM("Bancos", "Codigo,Codigo,Banco,Banco", "Codigo,Banco",
				"Zoom Bancos");
	}

	function setSelectedZoomItem(selectedItem) {
		if (selectedItem['type'] == "Bancos") {
			$("#banco").val(
					selectedItem['Codigo'] + ' - ' + selectedItem['Banco']);
		}
	}
</script>
</html>